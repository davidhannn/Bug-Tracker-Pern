{"ast":null,"code":"import{Fragment}from'react';import{useSelector,useDispatch}from'react-redux';import{useParams,useHistory}from'react-router-dom';import{useMediaQuery,useTheme}from'@material-ui/core';import{selectAuthState}from'../../redux/slices/authSlice';import{selectBugById,deleteBug,resolveBug}from'../../redux/slices/bugSlice';import BugDetailsMobile from'../../components/bug-details-mobile/bug-details-mobile.component';import BugDetails from'../../components/bug-details/bug-details.component';import{useBugPageStyles}from'../../styles/muiStyles';import ConfirmDialog from'../../components/confirm-dialog/confirm-dialog.component';import DeleteOutlineIcon from'@material-ui/icons/DeleteOutline';import DoneOutlineIcon from'@material-ui/icons/DoneOutline';import RedoIcon from'@material-ui/icons/Redo';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BugPage=function BugPage(){var dispatch=useDispatch();var history=useHistory();var _useParams=useParams(),bugId=_useParams.bugId,projectId=_useParams.projectId;var _useSelector=useSelector(selectAuthState),user=_useSelector.user;var bug=useSelector(function(state){return selectBugById(state,bugId,projectId);});var theme=useTheme();var isMobile=useMediaQuery(theme.breakpoints.down('xs'));var classes=useBugPageStyles();if(!bug){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:\"No bugs\"})});}console.log(bug);var id=bug.id,name=bug.name,description=bug.description,priority=bug.priority,isResolved=bug.isResolved,createdBy=bug.createdBy,updatedBy=bug.updatedBy,closedBy=bug.closedBy,createdAt=bug.createdAt;var isAdmin=(user===null||user===void 0?void 0:user.id)===(bug===null||bug===void 0?void 0:bug.createdBy.id);var handleBugDelete=function handleBugDelete(){dispatch(deleteBug(projectId,bugId));history.push(\"/projects/\".concat(projectId));};var handleBugReopen=function handleBugReopen(){dispatch(resolveBug(projectId,bugId,'reopen'));};var handleBugClose=function handleBugClose(){dispatch(resolveBug(projectId,bugId,'close'));};var adminButtons=function adminButtons(){if(!isAdmin)return null;return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:classes.buttonWrapper,children:/*#__PURE__*/_jsx(ConfirmDialog,{title:\"Delete Bug\",bodyContent:\"Do you want to permanently delete your bug?\",buttonText:\"Delete Bug\",buttonType:{type:'normal',text:'Delete Bug',icon:DeleteOutlineIcon},actionFunction:handleBugDelete})}),isResolved?/*#__PURE__*/_jsx(ConfirmDialog,{title:\"Re-open Bug\",bodyContent:\"Do you want to re-open your bug?\",buttonText:\"Re-open Bug\",buttonType:{type:'normal',text:'Re-open Bug',icon:RedoIcon},actionFunction:handleBugReopen}):/*#__PURE__*/_jsx(ConfirmDialog,{title:\"Close Bug\",bodyContent:\"Do you want to close out your bug?\",buttonText:\"Close Bug\",buttonType:{type:'normal',text:'Close Bug',icon:DoneOutlineIcon},actionFunction:handleBugClose})]});};return/*#__PURE__*/_jsxs(Fragment,{children:[!isMobile?/*#__PURE__*/_jsx(BugDetails,{bug:bug}):/*#__PURE__*/_jsx(BugDetailsMobile,{bug:bug}),/*#__PURE__*/_jsx(\"div\",{className:classes.buttons,children:adminButtons()})]});};export default BugPage;","map":{"version":3,"sources":["C:/Users/david/Desktop/Bug-Tracker-Pern/client/src/pages/bug-page/bugpage.component.tsx"],"names":["Fragment","useSelector","useDispatch","useParams","useHistory","useMediaQuery","useTheme","selectAuthState","selectBugById","deleteBug","resolveBug","BugDetailsMobile","BugDetails","useBugPageStyles","ConfirmDialog","DeleteOutlineIcon","DoneOutlineIcon","RedoIcon","BugPage","dispatch","history","bugId","projectId","user","bug","state","theme","isMobile","breakpoints","down","classes","console","log","id","name","description","priority","isResolved","createdBy","updatedBy","closedBy","createdAt","isAdmin","handleBugDelete","push","handleBugReopen","handleBugClose","adminButtons","buttonWrapper","type","text","icon","buttons"],"mappings":"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","sourcesContent":["import { Fragment } from 'react';\r\nimport { RootState } from '../../redux/store';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\n\r\nimport { Paper, Typography, useMediaQuery, useTheme } from '@material-ui/core';\r\nimport { selectAuthState } from '../../redux/slices/authSlice';\r\nimport {\r\n  selectBugById,\r\n  deleteBug,\r\n  resolveBug,\r\n} from '../../redux/slices/bugSlice';\r\n\r\nimport BugDetailsMobile from '../../components/bug-details-mobile/bug-details-mobile.component';\r\nimport BugDetails from '../../components/bug-details/bug-details.component';\r\nimport { formatDateTime } from '../../utils/helper';\r\n\r\nimport { useBugPageStyles } from '../../styles/muiStyles';\r\n\r\nimport ConfirmDialog from '../../components/confirm-dialog/confirm-dialog.component';\r\n\r\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\r\nimport DoneOutlineIcon from '@material-ui/icons/DoneOutline';\r\nimport RedoIcon from '@material-ui/icons/Redo';\r\n\r\nimport { priorityStyles, statusStyles } from '../../styles/buttonStyles';\r\n\r\ninterface ParamTypes {\r\n  projectId: string;\r\n  bugId: string;\r\n}\r\n\r\nconst BugPage = () => {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const { bugId, projectId } = useParams<ParamTypes>();\r\n  const { user } = useSelector(selectAuthState);\r\n  const bug = useSelector((state: RootState) =>\r\n    selectBugById(state, bugId, projectId)\r\n  );\r\n  const theme = useTheme();\r\n  const isMobile = useMediaQuery(theme.breakpoints.down('xs'));\r\n  const classes = useBugPageStyles();\r\n\r\n  if (!bug) {\r\n    return (\r\n      <div>\r\n        <p>No bugs</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  console.log(bug);\r\n  const {\r\n    id,\r\n    name,\r\n    description,\r\n    priority,\r\n    isResolved,\r\n    createdBy,\r\n    updatedBy,\r\n    closedBy,\r\n    createdAt,\r\n  } = bug;\r\n\r\n  const isAdmin = user?.id === bug?.createdBy.id;\r\n\r\n  const handleBugDelete = () => {\r\n    dispatch(deleteBug(projectId, bugId));\r\n    history.push(`/projects/${projectId}`);\r\n  };\r\n\r\n  const handleBugReopen = () => {\r\n    dispatch(resolveBug(projectId, bugId, 'reopen'));\r\n  };\r\n\r\n  const handleBugClose = () => {\r\n    dispatch(resolveBug(projectId, bugId, 'close'));\r\n  };\r\n\r\n  const adminButtons = () => {\r\n    if (!isAdmin) return null;\r\n\r\n    return (\r\n      <Fragment>\r\n        <div className={classes.buttonWrapper}>\r\n          <ConfirmDialog\r\n            title=\"Delete Bug\"\r\n            bodyContent=\"Do you want to permanently delete your bug?\"\r\n            buttonText=\"Delete Bug\"\r\n            buttonType={{\r\n              type: 'normal',\r\n              text: 'Delete Bug',\r\n              icon: DeleteOutlineIcon,\r\n            }}\r\n            actionFunction={handleBugDelete}\r\n          />\r\n        </div>\r\n        {isResolved ? (\r\n          <ConfirmDialog\r\n            title=\"Re-open Bug\"\r\n            bodyContent=\"Do you want to re-open your bug?\"\r\n            buttonText=\"Re-open Bug\"\r\n            buttonType={{\r\n              type: 'normal',\r\n              text: 'Re-open Bug',\r\n              icon: RedoIcon,\r\n            }}\r\n            actionFunction={handleBugReopen}\r\n          ></ConfirmDialog>\r\n        ) : (\r\n          <ConfirmDialog\r\n            title=\"Close Bug\"\r\n            bodyContent=\"Do you want to close out your bug?\"\r\n            buttonText=\"Close Bug\"\r\n            buttonType={{\r\n              type: 'normal',\r\n              text: 'Close Bug',\r\n              icon: DoneOutlineIcon,\r\n            }}\r\n            actionFunction={handleBugClose}\r\n          ></ConfirmDialog>\r\n        )}\r\n      </Fragment>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {!isMobile ? <BugDetails bug={bug} /> : <BugDetailsMobile bug={bug} />}\r\n      <div className={classes.buttons}>{adminButtons()}</div>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default BugPage;\r\n"]},"metadata":{},"sourceType":"module"}